/*! events-manager (1.1.2). (C) 2014-2015 Xavier Boubert. MIT @license: en.wikipedia.org/wiki/MIT_License */
!function(n){"use strict";if(!n.EventsManager){var t=function(n,t){var e=!1;this.name=n,this.namespace=t,this.stopPropagation=function(){e=!0},this.isStoppedPropagation=function(){return e},this.resetStopPropagation=function(){e=!1}},e=function(){var n={low:-1,normal:0,high:9999999};this.formatPriority=function(t){return"undefined"!=typeof t&&null!==t||(t="normal"),"string"==typeof t&&(t in n||(t="normal"),t=n[t]),t},this.sortByPriority=function(n){n.sort(function(n,t){return t.priority-n.priority})}};n.EventsManager=function(){function n(n){var t=[];return n.split(" ").map(function(n){n&&t.push(n)}),t}function i(n){var t=null;return n=n.split("."),n.length>1?(t=n[0],n=n[1]):n=n[0],{name:n,namespace:t}}function o(n){l[n]&&console.warn('EventsManager: Be careful, event "'+n+'" is locked for use')}function r(n,e,i,o,a,f){if(a=a||0,f=f||[],a>=i.length)return void(o&&o(f));var u=i[a];if(u){var c=new t(n,u.namespace);if(u.async)return void u.func.call(c,e,function(t){f.push("undefined"==typeof t?null:t),r(n,e,i,o,c.isStoppedPropagation()?i.length:a+1,f)});var s=u.func.call(c,e);return f.push("undefined"==typeof s?null:s),void r(n,e,i,o,c.isStoppedPropagation()?i.length:a+1,f)}r(n,e,i,o,a+1,f)}function a(n,t,e){2==n&&t&&t(e)}function f(t,e,r,a){r=h.formatPriority(r),o(t),n(t).map(function(n){n=i(n),s[n.name]=s[n.name]||[],s[n.name].push({namespace:n.namespace,priority:r,func:e,async:a||!1}),h.sortByPriority(s[n.name])})}function u(n,t,e){for(var i=0,o=p.length;o>i;i++)if(p[i].namespace==n&&(e||p[i].func.toString()==t.toString())){p.splice(i,1);break}}var c=this,s=[],p=[],h=new e,l={};this.eventsName=function(){var n=[],t=null;for(t in s)n.push(t);return n},this.eventsStack=function(n){return(s[n]||[]).concat(p)},this.fire=function(n,t,e){var i=0,f=[];return"undefined"!=typeof s[n]?(o(n),l[n]=!0,r(n,t,s[n],function(n){f=f.concat(n),i++,a(i,e,f)}),delete l[n]):i++,p.length?r(n,t,p,function(n){f=f.concat(n),i++,a(i,e,f)}):i++,a(i,e,f),f},this.on=function(n,t,e){return f(n,t,e),c},this.onSafe=function(n,t,e){return c.off(n,t),c.on(n,t,e)},this.onAsync=function(n,t,e){return f(n,t,e,!0),c},this.onAsyncSafe=function(n,t,e){return c.off(n,t),c.onAsync(n,t,e)},this.onAnything=function(n,t,e){return e=h.formatPriority(e),p.push({namespace:n,priority:e,func:t}),c},this.onAnythingSafe=function(n,t,e){return c.offAnything(n,t),c.onAnything(n,t,e)},this.off=function(t,e){return o(t),n(t).map(function(n){if(n=i(n),"undefined"!=typeof s[n.name])for(var t=0,o=s[n.name].length;o>t;t++)if((!n.namespace||s[n.name][t].namespace==n.namespace)&&s[n.name][t].func.toString()==e.toString()){s[n.name].splice(t,1);break}}),c},this.offAnything=function(n,t){return u(n,t),c},this.offNamespace=function(n){var t;for(t in s){for(var e=s[t],i=[],r=e.length-1;r>=0;r--)e[r].namespace!==n&&i.push(e[r]);i.length!==e.length&&(o(t),s[t]=i)}return u(n,null,!0),c},this.offAll=function(){s=[],p=[]}}}}("undefined"==typeof exports?this:exports);
//# sourceMappingURL=events-manager.min.js.map