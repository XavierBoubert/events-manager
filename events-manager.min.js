/*! events-manager (1.1.0). (C) 2014-2015 Xavier Boubert. MIT @license: en.wikipedia.org/wiki/MIT_License */
!function(n){"use strict";if(!n.EventsManager){var t=function(n,t){var e=!1;this.name=n,this.namespace=t,this.stopPropagation=function(){e=!0},this.isStoppedPropagation=function(){return e},this.resetStopPropagation=function(){e=!1}},e=function(){var n={low:-1,normal:0,high:9999999};this.formatPriority=function(t){return("undefined"==typeof t||null===t)&&(t="normal"),"string"==typeof t&&(t in n||(t="normal"),t=n[t]),t},this.sortByPriority=function(n){n.sort(function(n,t){return t.priority-n.priority})}};n.EventsManager=function(){function n(n){var t=[];return n.split(" ").map(function(n){n&&t.push(n)}),t}function i(n){var t=null;return n=n.split("."),n.length>1?(t=n[0],n=n[1]):n=n[0],{name:n,namespace:t}}function o(n){h[n]&&console.error('EventsManager: Event "'+n+'" is locked for use')}function r(n,e,i,o,f,a){if(f=f||0,a=a||[],f===i.length)return void(o&&o(a));var u=i[f];if(u){var s=new t(n,u.namespace);if(u.async)return void u.func.call(s,e,function(t){a.push("undefined"==typeof t?null:t),r(n,e,i,o,s.isStoppedPropagation()?i.length:f+1,a)});var c=u.func.call(s,e);return a.push("undefined"==typeof c?null:c),void r(n,e,i,o,s.isStoppedPropagation()?i.length:f+1,a)}r(n,e,i,o,f+1,a)}function f(t,e,r,f){r=p.formatPriority(r),o(t),n(t).map(function(n){n=i(n),s[n.name]=s[n.name]||[],s[n.name].push({namespace:n.namespace,priority:r,func:e,async:f||!1}),p.sortByPriority(s[n.name])})}function a(n,t,e){for(var i=0,o=c.length;o>i;i++)if(c[i].namespace==n&&(e||c[i].func.toString()==t.toString())){c.splice(i,1);break}}var u=this,s=[],c=[],p=new e,h={};this.eventsName=function(){var n=[],t=null;for(t in s)n.push(t);return n},this.eventsStack=function(n){return(s[n]||[]).concat(c)},this.fire=function(n,t,e){var i=[];return"undefined"!=typeof s[n]&&(o(n),h[n]=!0,r(n,t,s[n],function(n){e&&e(n)}),delete h[n]),c.length&&r(n,t,c,function(n){e&&e(n)}),i},this.on=function(n,t,e){return f(n,t,e),u},this.onSafe=function(n,t,e){return u.off(n,t),u.on(n,t,e)},this.onAsync=function(n,t,e){return f(n,t,e,!0),u},this.onAsyncSafe=function(n,t,e){return u.off(n,t),u.onAsync(n,t,e)},this.onAnything=function(n,t,e){return e=p.formatPriority(e),c.push({namespace:n,priority:e,func:t}),u},this.onAnythingSafe=function(n,t,e){return u.offAnything(n,t),u.onAnything(n,t,e)},this.off=function(t,e){return o(t),n(t).map(function(n){if(n=i(n),"undefined"!=typeof s[n.name])for(var t=0,o=s[n.name].length;o>t;t++)if((!n.namespace||s[n.name][t].namespace==n.namespace)&&s[n.name][t].func.toString()==e.toString()){s[n.name].splice(t,1);break}}),u},this.offAnything=function(n,t){return a(n,t),u},this.offNamespace=function(n){var t;for(t in s){for(var e=s[t],i=[],r=e.length-1;r>=0;r--)e[r].namespace!==n&&i.push(e[r]);i.length!==e.length&&(o(t),s[t]=i)}return a(n,null,!0),u},this.offAll=function(){s=[],c=[]}}}}("undefined"==typeof exports?this:exports);
//# sourceMappingURL=events-manager.min.js.map